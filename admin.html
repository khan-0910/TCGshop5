<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Panel - Pokemon Cards Store</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/admin.css">
</head>
<body>

<!-- Header -->
<header>
    <div class="container">
        <div class="header-content">
            <div class="logo">
                <h1>‚ö° Pok√©Cards Store - Admin</h1>
            </div>
            <nav>
                <ul>
                    <li><a href="index.html">Store</a></li>
                    <li><a href="cart.html">Cart (<span id="cart-count">0</span>)</a></li>
                    <li><a href="admin.html" class="active">Admin</a></li>
                </ul>
            </nav>
        </div>
    </div>
</header>

<!-- LOGIN SCREEN -->
<div id="admin-login" class="admin-login">
    <div class="login-box">
        <h2>üîê Admin Login</h2>
        <p>Enter password to access admin panel</p>

        <form onsubmit="checkPassword(event)">
            <div class="form-group">
                <label for="admin-password">Password</label>
                <input type="password" id="admin-password" required autofocus>
            </div>
            <button type="submit" class="btn-login">Login</button>
            <p class="login-hint">Default password: <code>admin123</code></p>
        </form>
    </div>
</div>

<!-- ADMIN PANEL -->
<div id="admin-panel" class="admin-container" style="display:none;">

    <div class="admin-header">
        <h2 id="section-title">Product Management</h2>
        <div>
            <button class="btn-tab" id="products-tab" onclick="showSection('products')" style="background: var(--primary-color);">Products</button>
            <button class="btn-tab" id="orders-tab" onclick="showSection('orders')">Orders</button>
            <button class="btn-add-product" id="add-product-btn" onclick="showAddProductForm()">+ Add New Product</button>
            <button class="btn-logout" onclick="logout()">Logout</button>
        </div>
    </div>

    <!-- PRODUCT FORM -->
    <div id="product-form" style="display:none;">
        <form id="product-form-element" onsubmit="saveProduct(event)">
            <!-- unchanged -->
        </form>
    </div>

    <!-- PRODUCTS -->
    <div id="products-section">
        <table>
            <tbody id="products-table-body"></tbody>
        </table>
    </div>

    <!-- ORDERS -->
    <div id="orders-section" style="display:none;">
        <table>
            <tbody id="orders-table-body"></tbody>
        </table>
    </div>

    <!-- STATS -->
    <div class="admin-stats">
        <div>Total Products: <span id="stat-total-products">0</span></div>
        <div>Stock Value: <span id="stat-stock-value">‚Çπ0</span></div>
        <div>Low Stock: <span id="stat-low-stock">0</span></div>
        <div>Out of Stock: <span id="stat-out-stock">0</span></div>
    </div>

</div>

<!-- Toast -->
<div id="toast" class="toast"></div>

<!-- SCRIPTS -->
<script src="js/api-config.js"></script>
<script src="js/data.js"></script>
<script src="js/admin.js"></script>

<script>
const ADMIN_PASSWORD = 'admin123';

function showAdminPanel() {
    document.getElementById('admin-login').style.display = 'none';
    document.getElementById('admin-panel').style.display = 'block';
}

function checkPassword(event) {
    event.preventDefault();
    const pw = document.getElementById('admin-password').value;

    if (pw === ADMIN_PASSWORD) {
        sessionStorage.setItem('adminLoggedIn', 'true');
        showAdminPanel();
        showToast('Login successful', 'success');
    } else {
        showToast('Incorrect password', 'error');
    }
}

function logout() {
    sessionStorage.removeItem('adminLoggedIn');
    location.reload();
}

window.addEventListener('DOMContentLoaded', () => {
    if (sessionStorage.getItem('adminLoggedIn') === 'true') {
        showAdminPanel();
    }
});
</script>

</body>
</html>
